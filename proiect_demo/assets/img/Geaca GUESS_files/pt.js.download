!function(){"use strict";var n=document,s=window;"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},writable:!0,configurable:!0});function t(e){this.siteDomain=e,this.setParams=function(e){this.params=e},this.track=function(){var e;-1===["de","fr","ru"].indexOf(this.siteDomain.toLowerCase())&&("viewcontent"!==(e=new String(this.params.ev).toLowerCase())&&"pageview"!==e&&"addtocart"!==e&&"purchase"!==e||(e=this.buildUrl(this.params),this.enqueueUrl(e)))},this.enqueueUrl=function(e){o.push(e),this.sendUrls()},this.sendUrls=function(){var e,t,i,n;a||(a=!0,(e=o.shift())?(t=new Image(1,1),i=new Image(1,1),n=e.replace("/rt/","/tr/"),i.onload=i.onerror=function(){a=!1,this.sendUrls()}.bind(this),i.src=n,-1===e.toLowerCase().indexOf("3fb68ddf1eabf7f9421b3fbf837a8fd2")&&(t.src=e)):a=!1)},this.buildUrl=function(e){var t,i="https://www."+this.getDomain()+"/rt/?",n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t+"="+encodeURIComponent(e[t]));var o=n.join("&").length;return n.push("l="+o),n.push("v=1"),i+n.join("&")},this.getDomain=function(){var e=s.location.href.match(/([0-9]+)\.devklarka\.[a-z]{2,}/);if(e)return parseInt(e[1],10)+".devklarka."+this.siteDomain.toLowerCase();switch(this.siteDomain.toLowerCase()){case"br":return"glami.com.br";case"tr":return"glami.com.tr";default:return"glami."+this.siteDomain.toLowerCase()}}}var o=[],a=!1,i=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return decodeURIComponent(o.substring(t.length,o.length))}return null},r=function(e,t,i,n,o){var s,a="";i&&((s=new Date).setTime(s.getTime()+60*i*1e3),a=s.toUTCString()),document.cookie=[e,"=",encodeURIComponent(t),a&&"; expires="+a,o&&"; path="+o,n&&"; domain="+n].join("")},c=function(){var e=window.location.href.match(/gci=([a-z0-9]{40})/i);if(e&&e[1])return e[1]},l=function(){var e=window.location.search.match(/gclid=([^&#]+)/i);if(e&&e[1])return e[1]},h={sessionCookieLifetime:43200,sessionCookieName:"gp_s",exitIdCookieName:"gp_e",userComesFromGlamiCookieName:"gp_g",config:{},paramsHashHistory:[],consent:1,consentIndexName:"consent",storage:{},getBeacon:function(e){return new t(e)},create:function(e,t,i,n){var o={},o=null!==e&&"object"==typeof e?e:null!==t&&"object"==typeof t?(o.apiKey=e,Object.assign(o,t)):null!==i&&"object"==typeof i?(o.apiKey=e,o.siteDomain=t,Object.assign(o,i)):(o.apiKey=e,o.siteDomain=t,o.trackerName=i,Object.assign(o,n)),t=(o=Object.assign({apiKey:null,siteDomain:null,trackerName:null},o)).trackerName||h.DEFAULT_TRACKER_NAME,i=o.source||h.DEFAULT_SOURCE_NAME,n=this.getCookieDomain(o.cookieDomain||"auto");this.config[t]={},this.config[t].apiKey=o.apiKey,this.config[t].siteDomain=o.siteDomain||"cz",this.config[t].source=i,this.config[t].domain=n,this.consent=1,Object.prototype.hasOwnProperty.call(o,this.consentIndexName)&&(this.consent=1===parseInt(o[this.consentIndexName])?1:0),this.storeExitClickId({gci:c(),gclid:l()},t)},track:function(e,t,i){var n,o,s,a,r={ev:t,consent:this.consent};for(a in i)if(i.hasOwnProperty(a)){var c=i[a];if(void 0!==c)if(a!==this.consentIndexName){if(c.constructor===Array){for(n=0,o=c.length;n<o;n++)c[n]=new String(c[n]).replace(/,/g,"\\,");s=c.join(",")}else s=c+"";r["cd["+a+"]"]=s.substr(0,1e3)}else this.consent=1===parseInt(c)?1:0,r.consent=this.consent}var l=this.getExitClickId();l&&(r["cd[gci]"]=l);t=Object.assign(this.getDefaultParams(e),r),l=this.getParamsHash(t);this.eventAlreadySent(l)||((e=this.getBeacon(this.config[e].siteDomain)).setParams(t),e.track(),this.paramsHashHistory.push(l))},getDefaultParams:function(e){var t={};t.k=this.config[e].apiKey,n.referrer&&(t.r=n.referrer),t.sid=this.getSessionId(e),t.u=s.location.href,t.pt=document.title,t.w=s.screen&&s.screen.availWidth?s.screen.availWidth:"",t.h=s.screen&&s.screen.availHeight?s.screen.availHeight:"";var i=Math.round((new Date).getTime()/1e3);return t.ts=i,t["cd[source]"]=this.config[e].source,t},push:function(){var e=Array.prototype.slice.call(arguments),t=e.slice(0,1).toString(),i=e.slice(1),n=h.DEFAULT_TRACKER_NAME;if(-1!==t.indexOf(".")&&(t=(e=t.split(".",2))[1],n=e[0]),this.hasOwnProperty(t))switch(t){case"create":this[t].apply(this,i);break;case"track":this[t].apply(this,[n].concat(i));break;default:console.error('Calling non-standard method "'+t+"'.")}else console.error('Calling non-standard method "'+t+"'.")},getSessionId:function(e){var t=this.getCookieValue(this.sessionCookieName);return t&&t.match(/^[0-9]+\.[0-9]+$/)||(t=this.generateSessionId()),this.setCookieValue(this.sessionCookieName,t,this.sessionCookieLifetime,this.config[e].domain,"/"),t},generateSessionId:function(){var e=Math.round(+new Date/1e3);return Math.round(Math.random()*e)+"."+e},storeExitClickId:function(e,t){var i=(new Date).valueOf(),n=(this.getCookieValue(this.exitIdCookieName)||"").match(/([^;]+)?;(.*)?\.([0-9]+)/),o={gci:"",gclid:""};e.gci||e.gclid?(e.timestamp=i,n&&(o.gci=n[1],o.gclid=n[2],o.timestamp=n[3],!e.gci&&o.gci&&(e.gci=o.gci),!e.gclid&&o.gclid&&(e.gclid=o.gclid),o.timestamp&&(e.timestamp=o.timestamp)),(e.gclid||e.gci)&&(o=(void 0===e.gci?"":e.gci)+";"+(void 0===e.gclid?"":e.gclid)+"."+e.timestamp,this.setCookieValue(this.exitIdCookieName,o,this.sessionCookieLifetime,this.config[t].domain,"/")),this.storeUserComesFromGlamiCookie(t,e.gci)):this.storeUserComesFromGlamiCookie(t,null)},storeUserComesFromGlamiCookie:function(e,t){null===i(this.userComesFromGlamiCookieName)&&(t=null!=t?1:0,r(this.userComesFromGlamiCookieName,t,null,this.config[e].domain,"/"))},getExitClickId:function(){var e=this.getCookieValue(this.exitIdCookieName);return e||!1},getParamsHash:function(e){var t,i,n=[];for(t in delete(e=Object.assign({},e)).ts,delete e.sid,e)e.hasOwnProperty(t)&&(i=e[t],n.push(t+":"+i));return n.join()},eventAlreadySent:function(e){for(var t=0,i=this.paramsHashHistory.length;t<i;t++)if(this.paramsHashHistory[t]===e)return!0;return!1},getCookieDomain:function(e){var t="";if("auto"===e){var i=(t=document.domain||location.hostname).split(".");2<i.length&&(t=i.slice(1).join("."))}else{if(null===e.match(/^\.?([a-z0-9]+\.)*[a-z0-9][a-z0-9-]*\.[a-z]{2,6}$/i))throw new Error("Invalid domain "+e+".");t=0===e.indexOf(".")?e.substr(1):e}return t},getCookieValue:function(e){return 0===this.consent?Object.prototype.hasOwnProperty.call(this.storage,e)?this.storage[e]:null:i(e)},setCookieValue:function(e,t,i,n,o){0!==this.consent?r(e,t,i,n,o):this.storage[e]=t}};h.DEFAULT_TRACKER_NAME="def",h.DEFAULT_SOURCE_NAME="js",function(){var e=s.GlamiTrackerObject||"glami",t=s[e];if(t&&t.q&&t.q.constructor===Array)for(var i=t.q,n=0,o=i.length;n<o;n++)h.push.apply(h,i[n]);s[e]=h.push.bind(h)}()}();